# IT资产管理系统

一个基于PHP + MySQL的企业级IT资产管理系统，支持多种设备类型管理、权限控制、统计分析等功能。

## 🚀 快速安装

### 环境要求
- PHP >= 7.4
- MySQL >= 5.5
- Web服务器 (Apache/Nginx)
- PDO MySQL扩展

### 方式一：宝塔面板部署（推荐）

如果您使用宝塔面板，请参考 **[宝塔面板部署指南](BAOTA_DEPLOYMENT.md)** 进行快速部署。

### 安装工具选择

根据您的MySQL版本选择合适的安装工具：

**🔍 版本检测工具**
- 如需检测MySQL版本，可查看数据库管理工具
- 或通过 `SELECT VERSION()` SQL语句检查

**🔧 兼容性修复工具**  
- 访问 `http://你的域名/mysql8_fix.php`
- 自动适配 MySQL 5.5, 5.7, 8.0, 8.4+ 等版本
- 智能选择兼容的SQL文件并修复兼容性问题

**📋 增强安装向导（推荐）**
- 访问 `http://你的域名/install.php`
- 完整的错误检测和提示
- 自动处理MySQL保留关键字兼容性
- 验证所有数据库表是否正确创建
- 详细的故障排除指南

### 方式二：通用安装步骤

1. **下载系统文件**
   ```bash
   # 将系统文件上传到Web服务器目录
   ```

2. **配置Web服务器**
   - 确保Web服务器指向项目根目录
   - 配置URL重写（可选，推荐使用nginx.conf配置）

3. **运行安装向导**
   ```
   访问: http://your-domain/install.php
   ```
   
4. **按照安装向导完成配置**
   - 环境检测
   - 数据库配置和连接测试
   - 自动创建表结构（支持MySQL 5.5-8.4.5）
   - 验证所有13个数据库表创建成功
   - 创建默认管理员账号
   - 详细的错误信息和故障排除建议

5. **删除安装文件**
   ```bash
   rm install.php  # 安装完成后请删除此文件
   ```

### 默认账号
- 用户名: `admin`
- 密码: `123456`
- **重要**: 首次登录后请立即修改密码

## 📋 功能特性

### 设备管理
- 🖥️ **笔记本电脑管理** - 型号、配置、状态跟踪
- 📺 **显示器管理** - 品牌、尺寸、接口类型
- 🖨️ **打印机管理** - 类型、耗材、维护记录
- 🏢 **主机管理** - 服务器配置、用途分类
- 🖥️ **服务器管理** - 远程连接、端口扫描

### 资源管理
- 📦 **耗材管理** - 库存出入库、消耗统计
- 🌐 **IP地址管理** - 网段规划、地址分配
- 🏷️ **品牌管理** - 设备品牌统一管理
- 🏢 **部门管理** - 组织架构、资产归属

### 系统功能
- 👥 **多级权限** - 系统管理员/管理员/网管
- 📊 **统计分析** - 资产统计、使用率分析
- 📝 **操作日志** - 完整的操作记录
- 🔐 **安全认证** - 登录验证、会话管理

## 🛠️ 技术架构

- **后端**: PHP 7.4+, PDO MySQL
- **前端**: HTML5, CSS3, JavaScript, jQuery
- **数据库**: MySQL 5.5-8.4.5（完全兼容）
- **架构**: MVC模式, RESTful API
- **部署**: 支持宝塔面板、Apache、Nginx等多种环境

## 📁 目录结构

```
├── index.php           # 主入口文件（支持路径重写）
├── install.php         # 增强安装向导
├── mysql8_fix.php      # MySQL兼容性修复工具
├── public/            # 静态资源和页面
│   ├── css/           # 样式文件
│   ├── js/            # JavaScript文件
│   └── *.html         # 功能页面（已修复API路径）
├── src/               # 源代码
│   ├── controllers/   # 控制器
│   ├── models/        # 数据模型
│   ├── config/        # 配置文件
│   ├── middleware/    # 中间件（认证等）
│   └── services/      # 服务层
├── sql/               # 数据库结构文件（MySQL多版本兼容）
└── storage/           # 存储目录
    ├── sessions/      # 会话文件
    └── logs/          # 日志文件
```

## 🔧 配置说明

### 数据库配置
配置文件: `src/config/database.php`

### Web服务器配置
推荐使用提供的 `nginx.conf` 配置文件

### 权限说明
- **系统管理员**: 完全权限，管理所有功能
- **管理员**: 管理网管账号和设备资产
- **网管**: 只能查看和修改自己的信息

## 📞 技术支持

### 常见问题解决

**API 404错误**
- 系统已修复前端API路径问题
- 支持宝塔面板等子目录部署
- 使用相对路径确保兼容性

**MySQL兼容性问题**
- 自动处理MySQL保留关键字（function, manual等）
- 支持MySQL 5.5到8.4.5所有版本
- 智能SQL模式设置

**登录跳转问题**  
- 修复登录成功后的路径跳转
- 统一使用`/public/index.html`路径
- 完善会话管理机制

### 故障排除

如遇到问题，请按以下顺序检查：

1. **环境检查**
   - PHP版本 >= 7.4
   - PDO MySQL扩展已启用
   - 数据库连接正常

2. **安装检查**
   - 所有13个数据库表是否创建成功
   - 配置文件是否正确生成
   - 目录权限是否设置正确

3. **部署检查**
   - Web服务器配置是否正确
   - URL重写规则是否生效
   - 静态资源是否可以访问

4. **功能验证**
   - 登录功能是否正常
   - 各功能模块页面是否加载正常
   - API接口是否响应正常

---

**版本**: 1.1  
**更新时间**: 2025-08-25  
**重要更新**: 修复MySQL 8.4.5兼容性、API路径问题、登录跳转问题