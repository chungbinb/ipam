<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <title>日志统计API测试</title>
</head>
<body>
    <h1>日志统计API测试</h1>
    <div id="output"></div>
    
    <script>
        function testAPI() {
            const output = document.getElementById('output');
            output.innerHTML = '<p>正在测试API...</p>';
            
            // 测试统计API
            fetch('../api/logs/statistics')
                .then(res => {
                    output.innerHTML += `<p>响应状态: ${res.status}</p>`;
                    return res.text(); // 先获取文本，再解析JSON
                })
                .then(text => {
                    output.innerHTML += `<p>原始响应: <pre>${text}</pre></p>`;
                    try {
                        const data = JSON.parse(text);
                        output.innerHTML += `<p>解析后的JSON: <pre>${JSON.stringify(data, null, 2)}</pre></p>`;
                    } catch (e) {
                        output.innerHTML += `<p>JSON解析错误: ${e.message}</p>`;
                    }
                })
                .catch(err => {
                    output.innerHTML += `<p>请求错误: ${err.message}</p>`;
                });
        }
        
        // 页面加载后自动测试
        document.addEventListener('DOMContentLoaded', testAPI);
    </script>
</body>
</html>
